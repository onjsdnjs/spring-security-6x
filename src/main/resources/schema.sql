DROP TABLE IF EXISTS ROLE_HIERARCHY_RELATIONSHIP CASCADE; -- 기존 테이블 정의 삭제 후 재생성

-- ... (기존 CREATE TABLE 문들 유지) ...

-- ROLE_HIERARCHY_RELATIONSHIP 테이블 (역할 계층 관계) - **수정된 정의**
CREATE TABLE ROLE_HIERARCHY_RELATIONSHIP (
                                                  hierarchy_id BIGINT GENERATED BY DEFAULT AS IDENTITY,
                                                  higher_role_id BIGINT NOT NULL, -- <<< parent_role_id 대신 higher_role_id로 변경
                                                  child_role_id BIGINT NOT NULL,
                                                  description VARCHAR(255),
                                                  PRIMARY KEY (hierarchy_id),
                                                  UNIQUE (higher_role_id, child_role_id), -- <<< UNIQUE 제약 조건도 higher_role_id로 변경
                                                  FOREIGN KEY (higher_role_id) REFERENCES ROLE(role_id) ON DELETE CASCADE, -- <<< FOREIGN KEY도 higher_role_id로 변경
                                                  FOREIGN KEY (child_role_id) REFERENCES ROLE(role_id) ON DELETE CASCADE
);
